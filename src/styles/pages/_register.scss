/* src/styles/pages/_register.scss
 * — Temizlenmiş & konsolide edilmiş —
 */

/* ========== Değişkenler ========== */
$bg-img: '../../assets/registerbg.avif';

$c-yellow: #facc15;
$c-yellow-600: #eab308;

$c-white-70: rgba(255,255,255,.7);
$c-white-60: rgba(255,255,255,.6);
$c-white-15: rgba(255,255,255,.15);
$c-white-10: rgba(255,255,255,.10);
$c-white-05: rgba(255,255,255,.05);

$c-black-30: rgba(0,0,0,.30);
$c-black-40: rgba(0,0,0,.40);

$field-gap: 16px;

/* ========== Mixins ========== */
@mixin glass {
  backdrop-filter: blur(1px);
  background: rgba(0,0,0,.60);
  border: 1px solid $c-white-10;
  box-shadow: 0 20px 50px rgba(0,0,0,.5);
}

@mixin input-base {
  width: 100%;
  border-radius: 12px;
  border: 1px solid $c-white-15;
  background: $c-black-40;
  color: #fff;
  padding: 12px 16px;
  outline: none;
  transition: box-shadow .2s ease, border-color .2s ease, background .2s ease;

  &::placeholder { color: $c-white-60; }

  &:focus {
    box-shadow: 0 0 0 3px rgba(250,204,21,.35);
    border-color: $c-yellow;
  }

  &:disabled {
    background: $c-black-30;
    color: $c-white-70;
    cursor: not-allowed;
  }
}

@mixin btn-primary {
  display: inline-block;
  width: 100%;
  border: 0;
  border-radius: 12px;
  padding: 12px 16px;
  background: $c-yellow;
  color: #111;
  font-weight: 700;
  cursor: pointer;
  transition: filter .15s ease, transform .05s ease;

  &:hover   { filter: brightness(1.05); }
  &:active  { transform: translateY(1px); }
  &:disabled{ opacity: .6; cursor: not-allowed; }
}

/* ========== Sayfa ========== */
.register-page {
  position: relative;
  color: #fff;
  min-height: 100%;
  display: flex;

  &::before,
  &::after {
    content: "";
    position: absolute;
    inset: 0;
    pointer-events: none;
  }

  &::before {
    background: url(#{$bg-img}) center/cover no-repeat;
    z-index: 0;
    transition: transform 1s ease;
  }

  &::after {
    background: linear-gradient(to top, #000 0%, rgba(0,0,0,.5) 60%, rgba(0,0,0,.3) 100%);
    z-index: 1;
  }

  .register-inner {
    position: relative;
    z-index: 2;
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: clamp(16px, 4vw, 40px);
  }
}

/* ========== Kart ========== */
.register-card {
  @include glass;
  width: min(500px, 100vw);
  border-radius: 20px;
  overflow: hidden;

  .card-body {
    padding: clamp(20px, 4vw, 40px);
  }

  h1.title {
    font-size: clamp(28px, 3.2vw, 38px);
    font-weight: 800;
    margin: 0 0 8px;
  }

  p.subtitle {
    color: $c-white-70;
    margin: 0 0 8px;
  }

  /* Step bar */
  .stepbar {
    margin-top: 18px;

    .track {
      height: 6px;
      background: $c-white-10;
      border-radius: 999px;
      overflow: hidden;

      .progress {
        height: 100%;
        width: 50%; /* JS ile %100'e geç */
        background: $c-yellow;
        transition: width .25s ease;
      }
    }

    .labels {
      display: flex;
      justify-content: space-between;
      margin-top: 8px;
      font-size: 14px;
      color: $c-white-70;

      .active { color: #fff; }
    }
  }

  /* Alerts */
  .alert {
    margin-top: 14px;
    padding: 12px 14px;
    border-radius: 10px;
    font-size: 14px;

    &.error {
      background: rgba(239,68,68,.15);
      border: 1px solid rgba(239,68,68,.35);
      color: #fecaca;
    }

    &.ok {
      background: rgba(16,185,129,.15);
      border: 1px solid rgba(16,185,129,.35);
      color: #bbf7d0;
    }
  }

  /* Form */
  form {
    margin-top: 18px;

    label {
      display: block;
      font-size: 14px;
      margin: 0 0 6px;
    }

    .input,
    .select,
    .date-month,
    .date-day,
    .date-year { @include input-base; }

    .date-row {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: 12px;
    }

    .input-with-toggle { position: relative; }

    .toggle {
      position: absolute;
      right: 10px;
      top: 50%;
      transform: translateY(-50%);
      color: $c-white-70;
      font-size: 13px;
      background: transparent;
      border: 0;
      cursor: pointer;
      z-index: 2;
    }

    .btn-primary { 
      @include btn-primary; 
      margin-top: $field-gap; 
    }

    .back-link {
      display: inline-block;
      margin-top: 8px;
      color: rgba(250, 204, 21, .9);
      text-decoration: none;

      &:hover { color: $c-yellow; text-decoration: underline; }
    }

    .muted {
      margin-top: 14px;
      text-align: center;
      font-size: 14px;
      color: $c-white-70;

      a {
        color: $c-yellow;
        text-decoration: none;
        &:hover { text-decoration: underline; }
      }
    }

    .terms {
      margin-top: 10px;
      font-size: 12px;
      color: $c-white-60;

      a { text-decoration: underline; }
    }
  }

  /* Footer stats */
  .card-stats {
    display: flex;
    justify-content: space-between;
    text-align: center;
    color: $c-white-70;
    border-top: 1px solid $c-white-10;
    padding: 18px clamp(24px, 4vw, 40px);

    .stat {
      .num   { font-size: 24px; font-weight: 800; color: #fff; }
      .label { font-size: 11px; text-transform: uppercase; letter-spacing: .08em; }
    }
  }

  .card-bottom {
    padding: 0 clamp(24px, 4vw, 40px) 22px;
    text-align: center;
    color: $c-white-70;
    font-size: 14px;
  }
}

/* Küçük ekran */
@media (max-width: 640px) {
  .register-card .card-stats { gap: 16px; }
  .register-card .card-body  { padding: 20px; }
}

/* Footer üstte kalsın (gerekirse) */
.ggdb-footer { position: relative; z-index: 3; }

/* ========== Auth alt link ========== */
.auth-alt {
  margin-top: 12px;
  text-align: center;
  font-size: 1rem;
  color: rgba(255,255,255,.7);

  .auth-alt-link {
    font-weight: 600;
    text-decoration: none;
    color: $c-yellow-600;

    &:hover { text-decoration: underline; }
  }
}

/* ========== Form Field & Durum ========== */
.form-field {
  position: relative;
  margin-bottom: $field-gap;

  .input {
    height: 60px;
    padding: 12px 40px 12px 14px; /* sağa ikon için boşluk */
    border-radius: 10px;
    border: 1px solid rgba(255,255,255,.15);
    background: rgba(0,0,0,.30);
    color: #fff;
    outline: none;
    transition: border-color .2s ease, box-shadow .2s ease;
  }

  &.ok  .input { border-color: #22c55e; box-shadow: 0 0 0 2px rgba(34,197,94,.15); }
  &.err .input { border-color: #ef4444; box-shadow: 0 0 0 2px rgba(239,68,68,.15); }

  .status-icon {
    position: absolute;
    right: 12px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 18px;
    pointer-events: none;

    &.ok  { color: #22c55e; }
    &.err { color: #ef4444; }
  }
}

/* ========== Floating Label (tek ve konsolide) ========== */
.floating {
  /* input/select alan */
  .input,
  .select { 
    padding-top: 22px;        /* label ile çakışma olmasın */
    &::placeholder { color: transparent; }
  }

  /* label başlangıç konumu */
  label {
    position: absolute;
    left: 14px;
    top: 6px;
    line-height: 1.1;
    padding: 0 4px;
    transform-origin: left top;
    transform: translateY(14px) scale(1);
    transition:
      transform .26s cubic-bezier(.4, 0, .2, 1),
      color .26s ease,
      background .26s ease,
      padding .26s ease;
    pointer-events: none;
    background: transparent;
    z-index: 1;
  }

  /* focus veya değer varsa yukarı küçült */
  .input:focus ~ label,
  .input:not(:placeholder-shown) ~ label,
  .select:focus ~ label,
  .select:not([value=""]):not([value=" "]) ~ label,
  &.has-value label {
    transform: translateY(0) scale(.78);
    color: #a3e635;
    background: $c-black-40;
    border-radius: 6px;
    padding: 0 4px;
  }

  /* toggle butonlu alanlar için sağ boşluk */
  .input { padding-right: 42px; }

  /* Autofill desteği */
  .input:-webkit-autofill ~ label {
    transform: translateY(0) scale(.78);
  }

  /* Durum ikonu animasyonu */
  .status-icon { transition: opacity .2s ease, transform .2s ease; }
}

/* Reduce motion */
@media (prefers-reduced-motion: reduce) {
  .floating label { transition: none; }
}

/* ========== Alt bilgilendirme mesajları ========== */
.check { margin-top: 6px; font-size: .92rem; }
.check.ok   { color: #16a34a; }
.check.err  { color: #ef4444; }
.check.info { color: #a3a3a3; }

/* ========== Eşit Dikey Boşluk ========== */
.register-card form {
  > .form-field,
  > .input,
  > .select,
  > .date-row { margin-bottom: $field-gap; }

  .btn-primary { margin-top: $field-gap; }
  .auth-alt    { margin-top: $field-gap; }
}

/* Tarih grid’inin içindekilere ekstra margin verme */
.date-row .input,
.date-row .select,
.date-row .form-field { margin-bottom: 0; }

/* Yardımcı */
.form-label { display:block; margin: 10px 0 6px; font-size:14px; }



/* === GLOBAL FIXES (taşmayı ve beyaz şeridi yok et) === */
html, body {
  height: 100%;
  background: #000; /* arka plan koyu kalsın */
}

.register-page {
  min-height: 100vh;     /* tam ekran */
  width: 100%;           /* 100vw yerine 100% */
  overflow-x: hidden;    /* olası taşmaları gizle */
}

/* İç wrap her genişlikte ortaya gelsin */
.register-page .register-inner {
  width: 100%;
}

/* === KART GENİŞLİKLERİ === */
/* 100vw KULLANMA! Yalnızca % + max-width */
.register-card {
  width: 100%;         /* << min(500px, 100vw) yerine */
  max-width: 520px;    /* masaüstünde 520px’i geçme */
  margin-inline: auto; /* ortala, yana kayma yapmasın */
}

/* Küçük ekranlarda içerik dolgusu hafiflesin */
@media (max-width: 640px) {
  .register-card .card-body  { padding: 20px; }
  .register-card .card-stats { gap: 12px; padding: 14px 16px; }
}

/* === FORM & GRID — güvenli kırılımlar === */
.register-card form .date-row {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr; /* varsayılan üçlü */
  gap: 12px;
}

/* 480px ve altı: 2+1 (yıl altta) */
@media (max-width: 480px) {
  .register-card form .date-row {
    grid-template-columns: 1fr 1fr;
    gap: 10px;
  }
  .register-card form .date-row .date-year {
    grid-column: 1 / -1;
  }
}

/* 360px ve altı: tek sütun (taşma sıfır) */
@media (max-width: 360px) {
  .register-card { max-width: 100%; }  /* çok dar cihazlar */
  .register-card form .date-row {
    grid-template-columns: 1fr;
    gap: 8px;
  }

  /* input yüksekliği ve label yerleşimi ufalır */
  .form-field .input { height: 52px; padding: 10px 40px 10px 12px; }
  .floating label { left: 12px; transform: translateY(12px) scale(1); }
}

/* Kısa yükseklikli ekranlarda (küçük laptop/tablet) taşma engeli */
@media (max-height: 700px) {
  .register-page { align-items: flex-start; }
  .register-card { margin-top: 24px; margin-bottom: 24px; }
}

/* Hareket azaltma tercihi */
@media (prefers-reduced-motion: reduce) {
  .register-page::before,
  .floating label,
  .register-card .stepbar .track .progress { transition: none !important; }
}


/* React-Select alanı ile alttaki input arasında boşluk */
.rs-field {
  margin-bottom: 16px; /* $field-gap ile de eşleyebilirsin */
}

/* Görsel uyum için (classNamePrefix='rs') */
.rs__control {
  backdrop-filter: blur(0.5px);
}
.rs__menu {
  border: 1px solid rgba(255,255,255,.1);
}
.rs__option {
  font-weight: 500;
}

/* Flag img (eğer kullanıyorsan) */
.flag-icon { width: 18px; height: 18px; vertical-align: -3px; }


/* classNamePrefix="rs" kullandığın için */
.rs__single-value { color: #fff !important; }
.rs__input-container input { color: #fff !important; }

/* Menüdeki seçenek metinleri */
.rs__option { color: #e5e7eb; }
.rs__option--is-focused { background: rgba(250,204,21,.15); color: #fff; }
.rs__option--is-selected { background: #facc15; color: #111; }


/* React-Select (classNamePrefix='rs') renk fixleri */
.rs__single-value { color: #fff !important; }
.rs__input-container input { color: #fff !important; }

.rs__menu, .rs__menu-list { background: #0b1220 !important; }
.rs__option { color: #fff !important; opacity: 1 !important; }
.rs__option--is-focused { background: rgba(250,204,21,.15) !important; color: #fff !important; }
.rs__option--is-selected { background: #facc15 !important; color: #111 !important; }
